<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">

<meta http-equiv="Content-Language" content="en">
<meta name="dc.type" content="Text">
<meta name="description" content="Experimental blogs">
<meta property="og:type" content="article" /><meta property="og:url" content="https://labs.projektemacher.org/en/post/node-dependencies/" /><meta property="og:title" content="Node Abhängigkeiten aus Themes" />

  
  
    
  



<meta name="keywords" content=", Hugo, Themes, Node"><meta name="dc.subject" content="Hugo"><meta name="dc.subject" content="Themes"><meta name="dc.subject" content="Node">
<meta name="generator" content="Hugo 0.157.0">
<meta name="projektemacher.org:build-date" content="2026-03-01 23:53:49.733179363 &#43;0000 UTC m=&#43;18.317984117"><meta name="projektemacher.org:stats" content="{&#34;count&#34;:&#34;122&#34;,&#34;latest&#34;:&#34;2024-01-01T12:30:07&#43;02:00&#34;}">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui">


<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
<link href="https://labs.projektemacher.org/css/de98a9243dac78c60665e2bf5939c8f8.min.70d358d6d801acc70599b7915cf36f622aad345f2ccb3ec237d6a8b05e632dbb.css" rel="stylesheet" integrity="sha256-cNNY1tgBrMcFmbeRXPNvYiqtNF8syz7CN9aosF5jLbs=">
<script src="https://labs.projektemacher.org/js/5d85c20c8f862f9ecfa0aee0edbc8fe4.min.0fccc223fafd67061a00bb11d1fdf5900652bbe3b2456f54ea34e0be41076c5b.js" integrity="sha256-D8zCI/r9ZwYaALsR0f31kAZSu+OyRW9U6jTgvkEHbFs="></script>
<title>Node Abhängigkeiten aus Themes - Projektemacher Labs</title>
</head><body class="">

<header>
  <div class="container clearfix">
    <a class="path" href="https://labs.projektemacher.org/">[Projektemacher Labs]</a>
    <span class="caret"># _</span><nav class="top top-menu">
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="menu-icon"></i></label>
    <ul class="navigation-list"><li class="navigation-item navto-future"><a class="navigation-link" href="https://labs.projektemacher.org/en/future" title="Planed Blogs">Planed Blogs<i class="link-icon"></i></a></li><li class="navigation-item navto-about"><a class="navigation-link" href="https://labs.projektemacher.org/en/about/" title="About">About<i class="link-icon"></i></a></li><li class="navigation-item lang">
              <a href="https://labs.projektemacher.org/post/node-dependencies/" title="Deutsch">Deutsch</a>
            </li></ul>
  </nav></div>
</header>

<div class="container">
    <main role="main" class="article">
      <article class="single " itemscope itemtype="http://schema.org/BlogPosting">
  <div class="meta">



    <br>
    <span class="key">tags:</span>
    <span class="val">

        <a href="https://labs.projektemacher.org/tags/Hugo">Hugo</a>

        <a href="https://labs.projektemacher.org/tags/Themes">Themes</a>

        <a href="https://labs.projektemacher.org/tags/Node">Node</a>

    </span>

  </div>
  <h1 class="headline" itemprop="headline">Node Abhängigkeiten aus Themes</h1>
  <section class="body" itemprop="articleBody"><p>Since the <a href="https://labs.projektemacher.org/post/recent-hugo-version/">upgrade to a Hugo version above 0.75.0</a> there is an enhancement in the form of the command <a href="https://gohugo.io/commands/hugo_mod_npm_pack/" target="_blank"><code>hugo mod npm pack</code></a> to merge the node dependencies of a theme with those of a project.</p>
<p>To use this new feature, the dependencies of a theme must be saved in a file <code>package.hugo.json</code> instead of<code> package.json</code>, it is sufficient to simply rename the file created by <code>npm</code> or<code> yarn</code>. A symlink alone doesn&rsquo;t work because Hugo&rsquo;s virtual filesystem (intentionally) doesn&rsquo;t work with symlinks.</p>
<p>If it&rsquo;s just about merging the <code>dependencies</code> and<code> devDependencies</code> sections, that works very well. However, if you have defined special scripts (section <code>scripts</code> in<code> package.json</code>), e.g. to patch existing node libraries, the whole thing does not really help, because these sections (and all others that do not explicitly define dependencies) contribute the merge ignored.</p>
<p>There is a [Hugo Feature Request] (<a href="https://github.com/gohugoio/hugo/issues/8319%29" target="_blank">https://github.com/gohugoio/hugo/issues/8319)</a>, but it is not yet clear whether and if so, when this will be implemented.</p>
<p>Two solutions are possible:</p>
<ul>
<li>Create a patched Node dependency and publish it to it&rsquo;s own Node package repository - One can use <a href="https://docs.github.com/en/actions/guides/publishing-nodejs-packages" target="_blank">GitHub</a> for building and distribution. Just make sure your project is using this registry.</li>
<li>Build your own merging logic using <a href="https://stedolan.github.io/jq/" target="_blank"><code>jq</code></a>:</li>
</ul>
<p>An example for two files:</p>
<pre tabindex="0"><code>jq -s &#39;.[0] * .[1]&#39;  package.hugo.json themes/some-hugo-theme-with-npm-dependencies/package.hugo.json
</code></pre><p>An Example using multiple themes (This only works with BSD <code>find</code> - not on GitHub):</p>
<pre tabindex="0"><code>find . -name &#34;package.hugo.json&#34; -o -name &#34;package.json&#34; -depth 0 | xargs jq -s add &gt; package.json
</code></pre>
  </section>
</article>

    </main>
</div>
<footer>
  <div class="footer-container">
    <p class="projektemacher">
        Projektemacher Labs is a <a href="https://projektemacher.org/en/">Projektemacher</a> blog <a title="Christian Mahnke" class="footer-link-cm" href="https://christianmahnke.de/"><img src="https://labs.projektemacher.org/images/cm.svg" style="height: 16px; margin-left: .5rem;"></a>
    </p><p class="copyright">&copy; MMXXI - MMXXVI <a href="https://labs.projektemacher.org">Projektemacher Labs</a></p><p class="privacy"><a href="https://labs.projektemacher.org/privacy" title="Privacy policy">Privacy policy</a></p></div>

</footer>

</body>
</html>

